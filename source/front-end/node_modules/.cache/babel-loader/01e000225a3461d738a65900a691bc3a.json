{"remainingRequest":"/home/glenn/B85C_EnMS/source/front-end/node_modules/babel-loader/lib/index.js!/home/glenn/B85C_EnMS/source/front-end/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/glenn/B85C_EnMS/source/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/glenn/B85C_EnMS/source/front-end/src/views/pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/glenn/B85C_EnMS/source/front-end/src/views/pages/Login.vue","mtime":1628001622000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2NvdW50OiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBwcm90ZWN0aW9uOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCAnJyk7CiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgJycpOwogICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnTkFNRScsICcnKTsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0NMQVNTJywgJycpOwogICAgdGhpcy5hY2NvdW50ID0gJyc7CiAgICB0aGlzLnBhc3N3b3JkID0gJyc7CiAgICB0aGlzLnByb3RlY3Rpb24gPSB0cnVlOwogIH0sCiAgbWV0aG9kczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucHJvdGVjdGlvbikgewogICAgICAgIHRoaXMucHJvdGVjdGlvbiA9IGZhbHNlOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgYWNjb3VudDogdGhpcy5hY2NvdW50LAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICB9OwogICAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9hY2NvdW50cy9sb2dpbicsIHsKICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgYWxlcnQoIuWbnuWCs+WAvOWHuuePvumdnumgkOacn+eLgOazge+8jOiri+eiuuiqjeW+jOWGjemAsuihjOaTjeS9nCEiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZGF0YVswXTsKCiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCBfdGhpcy5hY2NvdW50KTsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnUk9MRScsIHJlc3VsdC5yb2xlKTsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnREVQVCcsIHJlc3VsdC5kZXB0KTsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnTkFNRScsIHJlc3VsdC5uYW1lKTsKICAgICAgICAgICAgdmFyIHJvbGUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdST0xFJyk7CgogICAgICAgICAgICBpZiAocm9sZSA9PT0gJ2FkbWluJyB8fCByb2xlID09PSAndXNlcicgfHwgcm9sZSA9PT0gJ2d1ZXN0JykgewogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnL3Byb2R1Y3Rpb24tcmVvcHJ0ZXInKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhbGVydCgn5biz6Jmf5qyK6ZmQ5pyJ5ZWP6aGM77yM6KuL6IGv57mr57O757Wx566h55CG5ZOhISEhJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCAnJyk7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ1JPTEUnLCAnJyk7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0RFUFQnLCAnJyk7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ05BTUUnLCAnJyk7CiAgICAgICAgICAgIF90aGlzLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICAgIGFsZXJ0KCflr4bnorzkuI3mraPnorohISEnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5wcm90ZWN0aW9uID0gdHJ1ZTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNob3dBbGVydDogZnVuY3Rpb24gc2hvd0FsZXJ0KCkgewogICAgICBhbGVydCgn6KuL6IGv57mr57O757Wx566h55CG5ZOhISEhJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA,IAAA,cAAA,CAAA,OAAA,CAAA,SAAA,EAAA,EAAA;AACA,IAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,IAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AAEA,IAAA,cAAA,CAAA,OAAA,CAAA,OAAA,EAAA,EAAA;AAEA,SAAA,OAAA,GAAA,EAAA;AACA,SAAA,QAAA,GAAA,EAAA;AACA,SAAA,UAAA,GAAA,IAAA;AACA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA;AAEA,YAAA,IAAA,GAAA;AACA,UAAA,OAAA,EAAA,KAAA,OADA;AAEA,UAAA,QAAA,EAAA,KAAA;AAFA,SAAA;AAIA,aAAA,KAAA,CACA,IADA,CACA,qBADA,EACA;AAAA,UAAA,IAAA,EAAA;AAAA,SADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA,uBAAA,CAAA;AACA;AACA;;AACA,cAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;;AACA,cAAA,MAAA,EAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,SAAA,EAAA,KAAA,CAAA,OAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AAEA,gBAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA;;AAEA,gBAAA,IAAA,KAAA,OAAA,IAAA,IAAA,KAAA,MAAA,IAAA,IAAA,KAAA,OAAA,EAAA;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,sBAAA;AACA,aAFA,MAEA;AACA,cAAA,KAAA,CAAA,qBAAA,CAAA;AACA;AACA,WAbA,MAaA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,SAAA,EAAA,EAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA,UAAA,CAAA;AACA;;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AACA,SA9BA,EA+BA,KA/BA,CA+BA,UAAA,GAAA,EAAA;AAAA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AAAA,SA/BA;AAgCA;AACA,KA1CA;AA2CA,IAAA,SA3CA,uBA2CA;AACA,MAAA,KAAA,CAAA,aAAA,CAAA;AACA;AA7CA;AAnBA,CAAA","sourcesContent":["<template>\n    <CContainer class=\"d-flex align-items-center min-vh-100\">\n        <CRow class=\"justify-content-center\">\n            <CCol lg = '12'>\n                <CCardGroup>\n                    <CCard\n                        color=\"info\"\n                        text-color=\"white\"\n                        class=\"text-center py-2\"\n                        style=\"width:100%\"\n                    >\n                        <CCardBody>\n                            <h2 class=\"pt-4\">富鐿實業報工系統</h2>\n                            <CRow class=\"pt-4\">\n                                <CCol>\n                                    <CImg src=\"img/brand/scanna_index.png\" fluid class=\"mb-2\" />\n                                </CCol>\n                            </CRow>\n                        </CCardBody>\n                    </CCard>\n\n                    <CCard class=\"p-5\">\n                        <CCardBody>\n                            <CForm>\n                                <h1>登入</h1>\n                                <p class=\"text-muted\">請輸入帳號密碼</p>\n                                <CInput type=\"text\" placeholder=\"帳號\" v-model=\"account\" list=\"account_list\">\n                                    <template #prepend-content><CIcon name=\"cil-user\"/></template>\n                                </CInput>\n                                <CInput placeholder=\"密碼\" type=\"password\" v-model=\"password\" @keyup.enter.native=\"login\">\n                                    <template #prepend-content><CIcon name=\"cil-lock-locked\"/></template>\n                                </CInput>\n                                <CRow>\n                                    <CCol col=\"6\">\n                                        <CButton color=\"link\" class=\"px-0\" @click=\"showAlert\">忘記密碼?</CButton>\n                                    </CCol>\n                                    <CCol col=\"6\" class=\"text-right\">\n                                        <CButton color=\"info\" class=\"px-4\" @click=\"login\">登入</CButton>\n                                    </CCol>\n                                </CRow>\n                            </CForm>\n                        </CCardBody>\n                    </CCard>\n                </CCardGroup>\n            </CCol>\n        </CRow>\n    </CContainer>\n</template>\n\n<script>\nexport default {\n    data()  {\n        return {\n            account: '',\n            password: '',\n            protection:true\n        }\n    },\n    created(){\n        sessionStorage.setItem('ACCOUNT', '');\n        sessionStorage.setItem('ROLE', '')\n        sessionStorage.setItem('NAME', '')\n\n        sessionStorage.setItem('CLASS', '')\n\n        this.account    = ''\n        this.password   = ''\n        this.protection    = true\n    },\n    methods:{\n        login(){\n            if (this.protection){\n                this.protection = false\n\n                let data = {\n                    account:this.account,\n                    password:this.password\n                }\n                this.$http\n                    .post('/api/accounts/login',{data:data})\n                    .then(res => {\n                        if (res.status !== 200){\n                            alert(\"回傳值出現非預期狀況，請確認後再進行操作!\");\n                            return;\n                        }\n                        var result = res.data[0];\n                        if (result){\n                            sessionStorage.setItem('ACCOUNT', this.account);\n                            sessionStorage.setItem('ROLE', result.role);\n                            sessionStorage.setItem('DEPT', result.dept);\n                            sessionStorage.setItem('NAME', result.name);\n\n                            let role = sessionStorage.getItem('ROLE');\n\n                            if(role === 'admin' || role === 'user' || role === 'guest'){\n                                this.$router.push('/production-reoprter');\n                            } else {\n                                alert('帳號權限有問題，請聯繫系統管理員!!!');\n                            }\n                        } else {\n                            sessionStorage.setItem('ACCOUNT', '');\n                            sessionStorage.setItem('ROLE', '');\n                            sessionStorage.setItem('DEPT', '');\n                            sessionStorage.setItem('NAME', '');\n                            this.password = '';\n                            alert('密碼不正確!!!');\n                        }\n                        this.protection = true\n                    })\n                    .catch(err => { console.log(err.response.data.message) })\n            }\n        },\n        showAlert(){\n            alert('請聯繫系統管理員!!!');\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":"src/views/pages"}]}