{"remainingRequest":"/home/glenn/B85C_EnMS/source/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/glenn/B85C_EnMS/source/front-end/src/views/pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/glenn/B85C_EnMS/source/front-end/src/views/pages/Login.vue","mtime":1628001622000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/glenn/B85C_EnMS/source/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSAgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGFjY291bnQ6ICcnLAogICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgIHByb3RlY3Rpb246dHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCl7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnQUNDT1VOVCcsICcnKTsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgJycpCiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnTkFNRScsICcnKQoKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdDTEFTUycsICcnKQoKICAgICAgICB0aGlzLmFjY291bnQgICAgPSAnJwogICAgICAgIHRoaXMucGFzc3dvcmQgICA9ICcnCiAgICAgICAgdGhpcy5wcm90ZWN0aW9uICAgID0gdHJ1ZQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGxvZ2luKCl7CiAgICAgICAgICAgIGlmICh0aGlzLnByb3RlY3Rpb24pewogICAgICAgICAgICAgICAgdGhpcy5wcm90ZWN0aW9uID0gZmFsc2UKCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBhY2NvdW50OnRoaXMuYWNjb3VudCwKICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDp0aGlzLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLiRodHRwCiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy9hcGkvYWNjb3VudHMvbG9naW4nLHtkYXRhOmRhdGF9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWbnuWCs+WAvOWHuuePvumdnumgkOacn+eLgOazge+8jOiri+eiuuiqjeW+jOWGjemAsuihjOaTjeS9nCEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmRhdGFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnQUNDT1VOVCcsIHRoaXMuYWNjb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgcmVzdWx0LnJvbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnREVQVCcsIHJlc3VsdC5kZXB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ05BTUUnLCByZXN1bHQubmFtZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvbGUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdST0xFJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9sZSA9PT0gJ2FkbWluJyB8fCByb2xlID09PSAndXNlcicgfHwgcm9sZSA9PT0gJ2d1ZXN0Jyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wcm9kdWN0aW9uLXJlb3BydGVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfluLPomZ/mrIrpmZDmnInllY/poYzvvIzoq4voga/nuavns7vntbHnrqHnkIblk6EhISEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnREVQVCcsICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ05BTUUnLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5a+G56K85LiN5q2j56K6ISEhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm90ZWN0aW9uID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNob3dBbGVydCgpewogICAgICAgICAgICBhbGVydCgn6KuL6IGv57mr57O757Wx566h55CG5ZOhISEhJyk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\n    <CContainer class=\"d-flex align-items-center min-vh-100\">\n        <CRow class=\"justify-content-center\">\n            <CCol lg = '12'>\n                <CCardGroup>\n                    <CCard\n                        color=\"info\"\n                        text-color=\"white\"\n                        class=\"text-center py-2\"\n                        style=\"width:100%\"\n                    >\n                        <CCardBody>\n                            <h2 class=\"pt-4\">富鐿實業報工系統</h2>\n                            <CRow class=\"pt-4\">\n                                <CCol>\n                                    <CImg src=\"img/brand/scanna_index.png\" fluid class=\"mb-2\" />\n                                </CCol>\n                            </CRow>\n                        </CCardBody>\n                    </CCard>\n\n                    <CCard class=\"p-5\">\n                        <CCardBody>\n                            <CForm>\n                                <h1>登入</h1>\n                                <p class=\"text-muted\">請輸入帳號密碼</p>\n                                <CInput type=\"text\" placeholder=\"帳號\" v-model=\"account\" list=\"account_list\">\n                                    <template #prepend-content><CIcon name=\"cil-user\"/></template>\n                                </CInput>\n                                <CInput placeholder=\"密碼\" type=\"password\" v-model=\"password\" @keyup.enter.native=\"login\">\n                                    <template #prepend-content><CIcon name=\"cil-lock-locked\"/></template>\n                                </CInput>\n                                <CRow>\n                                    <CCol col=\"6\">\n                                        <CButton color=\"link\" class=\"px-0\" @click=\"showAlert\">忘記密碼?</CButton>\n                                    </CCol>\n                                    <CCol col=\"6\" class=\"text-right\">\n                                        <CButton color=\"info\" class=\"px-4\" @click=\"login\">登入</CButton>\n                                    </CCol>\n                                </CRow>\n                            </CForm>\n                        </CCardBody>\n                    </CCard>\n                </CCardGroup>\n            </CCol>\n        </CRow>\n    </CContainer>\n</template>\n\n<script>\nexport default {\n    data()  {\n        return {\n            account: '',\n            password: '',\n            protection:true\n        }\n    },\n    created(){\n        sessionStorage.setItem('ACCOUNT', '');\n        sessionStorage.setItem('ROLE', '')\n        sessionStorage.setItem('NAME', '')\n\n        sessionStorage.setItem('CLASS', '')\n\n        this.account    = ''\n        this.password   = ''\n        this.protection    = true\n    },\n    methods:{\n        login(){\n            if (this.protection){\n                this.protection = false\n\n                let data = {\n                    account:this.account,\n                    password:this.password\n                }\n                this.$http\n                    .post('/api/accounts/login',{data:data})\n                    .then(res => {\n                        if (res.status !== 200){\n                            alert(\"回傳值出現非預期狀況，請確認後再進行操作!\");\n                            return;\n                        }\n                        var result = res.data[0];\n                        if (result){\n                            sessionStorage.setItem('ACCOUNT', this.account);\n                            sessionStorage.setItem('ROLE', result.role);\n                            sessionStorage.setItem('DEPT', result.dept);\n                            sessionStorage.setItem('NAME', result.name);\n\n                            let role = sessionStorage.getItem('ROLE');\n\n                            if(role === 'admin' || role === 'user' || role === 'guest'){\n                                this.$router.push('/production-reoprter');\n                            } else {\n                                alert('帳號權限有問題，請聯繫系統管理員!!!');\n                            }\n                        } else {\n                            sessionStorage.setItem('ACCOUNT', '');\n                            sessionStorage.setItem('ROLE', '');\n                            sessionStorage.setItem('DEPT', '');\n                            sessionStorage.setItem('NAME', '');\n                            this.password = '';\n                            alert('密碼不正確!!!');\n                        }\n                        this.protection = true\n                    })\n                    .catch(err => { console.log(err.response.data.message) })\n            }\n        },\n        showAlert(){\n            alert('請聯繫系統管理員!!!');\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}